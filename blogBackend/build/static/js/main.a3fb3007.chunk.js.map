{"version":3,"sources":["components/Blog.js","components/Togglable.js","services/blogs.js","services/login.js","components/LoginForm.js","App.js","index.js"],"names":["Blog","blog","title","author","Togglable","children","useState","visible","setVisible","showWhenVisible","display","hideWhenVisible","toggleVisible","style","onClick","onclick","token","axios","get","then","response","data","newBlog","config","headers","Authorization","post","newToken","credentials","LoginForm","handleSubmit","handleUsernameChange","handlePasswordChange","username","password","loginVisible","onsubmit","value","onChange","type","App","blogs","setBlogs","setTitle","url","setUrl","setAuthor","user","setUser","setUsername","setPassword","errorMessage","setErrorMessage","notification","setNotification","useEffect","loggedUserJSON","window","localStorage","getItem","JSON","parse","blogService","handleSaveSubmit","e","a","preventDefault","savedBlog","newBlogs","concat","console","log","setTimeout","handleLoginSubmit","loginData","loginService","loginUser","setItem","stringify","handleTextChange","target","name","className","removeItem","handleLogoutSubmit","onSubmit","listStyleType","htmlFor","map","key","id","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.a3fb3007.chunk.js","sourcesContent":["import React from 'react'\r\nconst Blog = ({ blog }) => (\r\n  <div>\r\n    {blog.title} {blog.author}\r\n  </div>\r\n)\r\n\r\nexport default Blog\r\n","import React, { useState } from 'react'\n\nconst Togglable = ({ children }) => {\n    const [visible, setVisible] = useState(false)\n    const showWhenVisible = { display: visible ? '' : 'none' }\n    const hideWhenVisible = { display: visible ? 'none' : '' }\n    const toggleVisible = () => {\n        setVisible(!visible)\n    }\n    return (\n        <div >\n            <div style={hideWhenVisible}>\n                <button onClick={toggleVisible}>login</button>\n            </div>\n            <div style={showWhenVisible}>\n                {children}\n                <button onclick={toggleVisible}>cancel</button>\n            </div>\n        </div >\n    )\n}\n\nexport default Togglable","import axios from 'axios'\n// const baseUrl = 'http://localhost:3003/api/blogs'\nconst baseUrl = '/api/blogs'\n\nlet token = null\n\nconst setToken = newToken => {\n  token = `bearer ${newToken}`\n}\n\nconst getAll = () => {\n  const request = axios.get(baseUrl)\n  return request.then(response => response.data)\n}\n\nconst postNewBlog = (newBlog) => {\n  const config = {\n    headers: { Authorization: token }\n  }\n  return axios.post(baseUrl, newBlog, config).then(response =>\n    response.data\n  )\n}\n\nexport default { getAll, postNewBlog, setToken }","import axios from 'axios'\n\n// const baseUrl = 'http://localhost:3003/api/login'\nconst baseUrl = '/api/login'\n\nconst login = (credentials) => {\n    return axios.post(baseUrl, credentials).then(response => response.data)\n}\n\nexport default { login }","import React from 'react'\n\nconst LoginForm = ({\n    handleSubmit,\n    handleUsernameChange,\n    handlePasswordChange,\n    username,\n    password,\n    loginVisible\n}) => {\n    return (\n        <div >\n            <h2>Login</h2>\n            <form onsubmit={handleSubmit}>\n                <div>\n                    username\n                    <input value={username}\n                        onChange={handleUsernameChange} />\n                </div>\n                <div>\n                    password\n                    <input value={password}\n                        onChange={handlePasswordChange} />\n                </div>\n                <button type=\"submit\">login</button>\n            </form>\n        </div >\n    )\n}\nexport default LoginForm\n","import React, { useState, useEffect } from 'react'\nimport Blog from './components/Blog'\nimport Togglable from './components/Togglable'\nimport blogService from './services/blogs'\nimport loginService from './services/login'\nimport LoginForm from './components/LoginForm'\nimport './App.css'\n\nconst App = () => {\n  const [blogs, setBlogs] = useState([])\n  const [title, setTitle] = useState(\"\")\n  const [url, setUrl] = useState(\"\")\n  const [author, setAuthor] = useState(\"\")\n  const [user, setUser] = useState(null)\n  const [username, setUsername] = useState(\"\")\n  const [password, setPassword] = useState(\"\")\n  const [errorMessage, setErrorMessage] = useState('')\n  const [notification, setNotification] = useState('')\n\n  useEffect(() => {\n    const loggedUserJSON = window.localStorage.getItem('loggedBlogappUser')\n    if (loggedUserJSON) {\n      const user = JSON.parse(loggedUserJSON)\n      setUser(user)\n      blogService.setToken(user.token)\n    }\n    blogService.getAll().then(blogs =>\n      setBlogs(blogs)\n    )\n  }, [])\n\n  const handleSaveSubmit = async (e) => {\n    e.preventDefault()\n    const newBlog = {\n      title: title,\n      author: author,\n      url: url\n    }\n    try {\n      const savedBlog = await blogService.postNewBlog(newBlog)\n      const newBlogs = blogs.concat(savedBlog)\n      console.log(newBlogs)\n      setBlogs(newBlogs)\n      setTitle(\"\")\n      setAuthor(\"\")\n      setUrl(\"\")\n      setNotification(`a new blog ${title} by ${author} added`)\n      setTimeout(() => {\n        setNotification('')\n      }, 5000)\n    }\n    catch (error) {\n      setTimeout(() => {\n        setErrorMessage('')\n      }, 5000)\n      setErrorMessage('something went wrong when saving the new blog, please enter again')\n    }\n  }\n\n  const handleLoginSubmit = async (e) => {\n    e.preventDefault()\n    const loginData = {\n      username: username,\n      password: password,\n    }\n    try {\n      const loginUser = await loginService.login(loginData)\n      window.localStorage.setItem(\n        'loggedBlogappUser', JSON.stringify(loginUser)\n      )\n      window.localStorage.setItem(\"loggedIn\", true)\n      setUser(loginUser)\n      blogService.setToken(loginUser.token)\n      setUsername('')\n      setPassword('')\n    }\n    catch (error) {\n      setErrorMessage('Wrong credentials')\n      setTimeout(() => {\n        setErrorMessage(null)\n      }, 5000)\n    }\n  }\n  const handleTextChange = (e) => {\n    switch (e.target.name) {\n      case \"title\":\n        setTitle(e.target.value)\n        break\n      case \"url\":\n        setUrl(e.target.value)\n        break\n      case \"author\":\n        setAuthor(e.target.value)\n        break\n      case \"username\":\n        setUsername(e.target.value)\n        break\n      case \"password\":\n        setPassword(e.target.value)\n        break\n      default:\n        break\n    }\n  }\n\n  const handleLogoutSubmit = (e) => {\n    e.preventDefault()\n    setUser(null)\n    window.localStorage.removeItem('loggedBlogappUser')\n  }\n\n  const blogForm = () => {\n    return (\n      <form onSubmit={(e) => handleSaveSubmit(e)}>\n        <ul style={{ listStyleType: \"none\" }}>\n          <li>\n            <label htmlFor=\"title\">title: </label>\n            <input value={title} name=\"title\" onChange={(e) => handleTextChange(e)}></input>\n          </li>\n          <li>\n            <label htmlFor=\"author\">author: </label>\n            <input value={author} name=\"author\" onChange={(e) => handleTextChange(e)}></input>\n          </li>\n          <li>\n            <label htmlFor=\"url\">url: </label>\n            <input value={url} name=\"url\" onChange={(e) => handleTextChange(e)}></input>\n          </li>\n          <li>\n            <button type=\"submit\">create</button>\n          </li>\n        </ul>\n      </form >\n    )\n  }\n  return (\n    <div>\n      {errorMessage && <div className='errorMessage'>\n        {errorMessage}\n      </div>}\n      {notification && <div className='notification'>\n        {notification}\n      </div>}\n      {user === null &&\n\n        <Togglable>\n          <LoginForm handleSubmit={handleLoginSubmit} handleUsernameChange={(e) => handleTextChange(e)}\n            handlePasswordChange={(e) => handleTextChange(e)} username={username} password={password}\n          />\n        </Togglable>\n      }\n      {user !== null &&\n        <div>\n          <h1>blogs</h1>\n          <p>{user.username} logged in <span><button onClick={(e) => handleLogoutSubmit(e)}>logout</button></span></p>\n          <h1>create new</h1>\n          {blogForm()}\n          {blogs.map(blog =>\n            <Blog key={blog.id} blog={blog} />\n          )}\n        </div>\n      }\n    </div >\n  )\n}\n\nexport default App","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\n\nReactDOM.render(<App />, document.getElementById('root'))"],"sourceRoot":""}