{"version":3,"sources":["components/Blog.js","services/blogs.js","services/login.js","App.js","index.js"],"names":["Blog","blog","title","author","token","axios","get","then","response","data","newBlog","config","headers","Authorization","post","console","log","newToken","credentials","App","useState","blogs","setBlogs","setTitle","url","setUrl","setAuthor","user","setUser","username","setUsername","password","setPassword","errorMessage","setErrorMessage","useEffect","blogService","handleTextChange","e","target","value","name","onSubmit","preventDefault","loginData","loginUser","loginService","error","setTimeout","handleLoginSubmit","htmlFor","onChange","type","savedBlog","newBlogs","concat","handleSaveSubmit","map","key","id","ReactDOM","render","document","getElementById"],"mappings":"oNAOeA,EANF,SAAC,GAAD,IAAGC,EAAH,EAAGA,KAAH,OACX,6BACGA,EAAKC,MADR,IACgBD,EAAKE,S,gBCDnBC,EAAQ,KAmBG,EAdA,WAEb,OADgBC,IAAMC,IAPR,cAQCC,MAAK,SAAAC,GAAQ,OAAIA,EAASC,SAY5B,EAVK,SAACC,GACnB,IAAMC,EAAS,CACbC,QAAS,CAAEC,cAAeT,IAK5B,OAHiBC,IAAMS,KAdT,aAcuBJ,EAASC,GAAQJ,MAAK,SAAAC,GACzDO,QAAQC,IAAIR,EAASC,SAEPA,MAGH,EAjBE,SAAAQ,GACfb,EAAK,iBAAaa,ICOL,EATD,SAACC,GAKX,OAJiBb,IAAMS,KAFX,aAEyBI,GAAaX,MAAK,SAAAC,GAEnD,OADAO,QAAQC,IAAIR,EAASC,MACdD,KAEKC,MC8HLU,EAjIH,WAAO,IAAD,EACUC,mBAAS,IADnB,mBACTC,EADS,KACFC,EADE,OAEUF,mBAAS,IAFnB,mBAETlB,EAFS,KAEFqB,EAFE,OAGMH,mBAAS,IAHf,mBAGTI,EAHS,KAGJC,EAHI,OAIYL,mBAAS,IAJrB,mBAITjB,EAJS,KAIDuB,EAJC,OAKQN,mBAAS,MALjB,mBAKTO,EALS,KAKHC,EALG,OAMgBR,mBAAS,IANzB,mBAMTS,EANS,KAMCC,EAND,OAOgBV,mBAAS,IAPzB,mBAOTW,EAPS,KAOCC,EAPD,OAQwBZ,qBARxB,mBAQTa,EARS,KAQKC,EARL,KAShBC,qBAAU,WACRC,IAAqB7B,MAAK,SAAAc,GAAK,OAC7BC,EAASD,QAEV,IAEH,IA2CMgB,EAAmB,SAACC,GAExB,OADAvB,QAAQC,IAAIsB,EAAEC,OAAOC,OACbF,EAAEC,OAAOE,MACf,IAAK,QACHlB,EAASe,EAAEC,OAAOC,OAClBzB,QAAQC,IAAId,GACZ,MACF,IAAK,MACHuB,EAAOa,EAAEC,OAAOC,OAChBzB,QAAQC,IAAIQ,GACZ,MACF,IAAK,SACHE,EAAUY,EAAEC,OAAOC,OACnB,MACF,IAAK,WACHV,EAAYQ,EAAEC,OAAOC,OACrBzB,QAAQC,IAAIa,GACZ,MACF,IAAK,WACHG,EAAYM,EAAEC,OAAOC,OACrBzB,QAAQC,IAAIe,KA+BlB,OACE,6BACGE,EACS,OAATN,GA3BD,0BAAMe,SAAU,SAACJ,GAAD,OAvDM,SAACA,GACzBA,EAAEK,iBACF,IAAMC,EAAY,CAChBf,SAAUA,EACVE,SAAUA,GAEZhB,QAAQC,IAAIa,EAAUE,GACtB,IACE,IAAMc,EAAYC,EAAmBF,GAIrC7B,QAAQC,IAAI6B,GACZjB,EAAQiB,GACR9B,QAAQC,IAAIW,GACZS,EAAqBS,EAAUzC,OAC/B0B,EAAY,IACZE,EAAY,IAEd,MAAOe,GACLb,EAAgB,qBAChBc,YAAW,WACTd,EAAgB,QACf,MAgCoBe,CAAkBX,KACvC,2BAAOY,QAAQ,YAAf,cACA,2BAAOV,MAAOX,EAAUY,KAAK,WAAWU,SAAU,SAACb,GAAD,OAAOD,EAAiBC,MAC1E,2BAAOY,QAAQ,YAAf,cACA,2BAAOV,MAAOT,EAAUU,KAAK,WAAWU,SAAU,SAACb,GAAD,OAAOD,EAAiBC,MAC1E,4BAAQc,KAAK,UAAb,UAuBQ,OAATzB,GACC,6BAjBF,0BAAMe,SAAU,SAACJ,GAAD,OAlFK,SAACA,GACxBA,EAAEK,iBAMFP,EALgB,CACdlC,MAAOA,EACPC,OAAQA,EACRqB,IAAKA,IAE0BjB,MAAK,SAAA8C,GACpC,IAAMC,EAAWjC,EAAMkC,OAAOF,GAC9B/B,EAASgC,GACTvC,QAAQC,IAAIsC,MAwEWE,CAAiBlB,KACtC,2BAAOY,QAAQ,SAAf,WACA,2BAAOV,MAAOtC,EAAOuC,KAAK,QAAQU,SAAU,SAACb,GAAD,OAAOD,EAAiBC,MACpE,2BAAOY,QAAQ,UAAf,YACA,2BAAOV,MAAOrC,EAAQsC,KAAK,SAASU,SAAU,SAACb,GAAD,OAAOD,EAAiBC,MACtE,2BAAOY,QAAQ,OAAf,SACA,2BAAOV,MAAOhB,EAAKiB,KAAK,MAAMU,SAAU,SAACb,GAAD,OAAOD,EAAiBC,MAChE,4BAAQc,KAAK,UAAb,UAeF,qCACC/B,EAAMoC,KAAI,SAAAxD,GAAI,OACb,kBAAC,EAAD,CAAMyD,IAAKzD,EAAK0D,GAAI1D,KAAMA,SC1HlC2D,IAASC,OAAO,kBAAC,EAAD,MAASC,SAASC,eAAe,W","file":"static/js/main.2526fea5.chunk.js","sourcesContent":["import React from 'react'\r\nconst Blog = ({ blog }) => (\r\n  <div>\r\n    {blog.title} {blog.author}\r\n  </div>\r\n)\r\n\r\nexport default Blog\r\n","import axios from 'axios'\nconst baseUrl = '/api/blogs'\nlet token = null\n\nconst setToken = newToken => {\n  token = `bearer ${newToken}`\n}\nconst getAll = () => {\n  const request = axios.get(baseUrl)\n  return request.then(response => response.data)\n}\nconst postNewBlog = (newBlog) => {\n  const config = {\n    headers: { Authorization: token }\n  }\n  const response = axios.post(baseUrl, newBlog, config).then(response => {\n    console.log(response.data)\n  })\n  return response.data\n}\n\nexport default { getAll, postNewBlog, setToken }","import axios from 'axios'\n\nconst baseUrl = '/api/login'\nconst login = (credentials) => {\n    const response = axios.post(baseUrl, credentials).then(response => {\n        console.log(response.data)\n        return response\n    })\n    return response.data\n\n}\n\nexport default { login }","import React, { useState, useEffect } from 'react'\nimport Blog from './components/Blog'\nimport blogService from './services/blogs'\nimport loginService from './services/login'\n\nconst App = () => {\n  const [blogs, setBlogs] = useState([])\n  const [title, setTitle] = useState(\"\")\n  const [url, setUrl] = useState(\"\")\n  const [author, setAuthor] = useState(\"\")\n  const [user, setUser] = useState(null)\n  const [username, setUsername] = useState(\"\")\n  const [password, setPassword] = useState(\"\")\n  const [errorMessage, setErrorMessage] = useState()\n  useEffect(() => {\n    blogService.getAll().then(blogs =>\n      setBlogs(blogs)\n    )\n  }, [])\n\n  const handleSaveSubmit = (e) => {\n    e.preventDefault()\n    const newBlog = {\n      title: title,\n      author: author,\n      url: url\n    }\n    blogService.postNewBlog(newBlog).then(savedBlog => {\n      const newBlogs = blogs.concat(savedBlog)\n      setBlogs(newBlogs)\n      console.log(newBlogs)\n    }\n    )\n  }\n\n  const handleLoginSubmit = (e) => {\n    e.preventDefault()\n    const loginData = {\n      username: username,\n      password: password,\n    }\n    console.log(username, password)\n    try {\n      const loginUser = loginService.login(loginData)\n      // window.localStorage.setItem(\n      //   'loggedBlogappUser', JSON.stringify(loginUser)\n      // )\n      console.log(loginUser)\n      setUser(loginUser)\n      console.log(user)\n      blogService.setToken(loginUser.token)\n      setUsername('')\n      setPassword('')\n    }\n    catch (error) {\n      setErrorMessage('Wrong credentials')\n      setTimeout(() => {\n        setErrorMessage(null)\n      }, 5000)\n    }\n  }\n\n\n  const handleTextChange = (e) => {\n    console.log(e.target.value)\n    switch (e.target.name) {\n      case \"title\":\n        setTitle(e.target.value)\n        console.log(title)\n        break\n      case \"url\":\n        setUrl(e.target.value)\n        console.log(url)\n        break\n      case \"author\":\n        setAuthor(e.target.value)\n        break\n      case \"username\":\n        setUsername(e.target.value)\n        console.log(username)\n        break\n      case \"password\":\n        setPassword(e.target.value)\n        console.log(password)\n        break\n    }\n  }\n\n  const loginForm = () => {\n    return (\n      <form onSubmit={(e) => handleLoginSubmit(e)}>\n        <label htmlFor=\"username\">username: </label>\n        <input value={username} name=\"username\" onChange={(e) => handleTextChange(e)}></input>\n        <label htmlFor=\"password\">password: </label>\n        <input value={password} name=\"password\" onChange={(e) => handleTextChange(e)}></input>\n        <button type=\"submit\" >login</button>\n      </form>\n    )\n  }\n\n  const blogForm = () => {\n    return (\n      <form onSubmit={(e) => handleSaveSubmit(e)}>\n        <label htmlFor=\"title\">title: </label>\n        <input value={title} name=\"title\" onChange={(e) => handleTextChange(e)}></input>\n        <label htmlFor=\"author\">author: </label>\n        <input value={author} name=\"author\" onChange={(e) => handleTextChange(e)}></input>\n        <label htmlFor=\"url\">url: </label>\n        <input value={url} name=\"url\" onChange={(e) => handleTextChange(e)}></input>\n        <button type=\"submit\">save</button>\n      </form>\n    )\n  }\n\n  return (\n    <div>\n      {errorMessage}\n      {user === null && loginForm()}\n      {user !== null &&\n        <div>\n          {/* <p>{user.username} logged in</p> */}\n          {blogForm()}\n        </div>\n      }\n      <h2>blogs</h2>\n      {blogs.map(blog =>\n        <Blog key={blog.id} blog={blog} />\n      )}\n\n\n    </div >\n  )\n}\n\nexport default App","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\n\nReactDOM.render(<App />, document.getElementById('root'))"],"sourceRoot":""}